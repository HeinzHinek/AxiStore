{% extends "base.html" %}
{% block content %}

<div class="row">
    <h1>{{ _('Orders from customers overview') }}</h1>
    {% include 'flash.html' %}

    <div style="text-align: right; padding: 10px 0px;">
    <a href="{{ url_for('createRequest') }}"><input type="button" class="btn btn-default" value="{{ _('Receive order') }}"></a>
    </div>
</div>

{% if requests %}
<div class="row">
    <table class="table table-hover table-striped table-responsive td-border-bottom-2px td-border-top-1px">
    <thead>
        <tr>
            <th class="td-border-left-1px">{{ _('Order ID') }}</th>
            <th>{{ _('Received') }}</th>
            <th>{{ _('Received by') }}</th>
            <th class="td-border-right-1px">{{ _('Customer') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for request in requests.items %}
        <tr
                {% if request.active_flg == false %} class="danger" {% endif %}
                onclick="window.location.href = '{{ url_for("request_detail", id=request.id) }}'">
            <td class="clickable-td td-border-left-2px">{{ request.id }}</td>
            <td class="clickable-td">{{ momentjs(request.created_dt).format('LLL') }}</td>
            <td class="clickable-td">{{ request.receiver.nickname }}</td>
            {% if request.customer.customer_type == CUSTOMER_TYPES['TYPE_AXM'] %}
                <td class="clickable-td td-border-right-2px">Axis Mart, {{ _('order no.') }} {{ request.customer.order_no }}</td>
            {% else %}
                <td class="clickable-td td-border-right-2px">{{ request.customer.name }}</td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
    </table>
    <br>

    <!-- PAGINATION -->
    <ul class="pager">
        {% if requests.has_prev or requests.has_next %}
        {% if requests.has_prev %}
        <li class="previous"><a href="{{ url_for('requests', page = requests.prev_num) }}"><< {{ _('Previous') }}</a></li>
        {% else %}
        <li class="previous disabled"><a href="#"><< {{ _('Previous') }}</a></li>
        {% endif %}
        {% if requests.has_next %}
        <li class="next"><a href="{{ url_for('requests', page = requests.next_num) }}">{{ _('Next') }} >></a></li>
        {% else %}
        <li class="next disabled"><a href="#">{{ _('Next') }} >></a></li>
        {% endif %}
        {% endif %}
    </ul>
</div>
{% endif %}

{% endblock %}